{"ast":null,"code":"import _classCallCheck from\"/home/jhon/Projetos/react-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jhon/Projetos/react-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/jhon/Projetos/react-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/jhon/Projetos/react-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jhon/Projetos/react-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Link}from'react-router-dom';import*as S from'../CSS/S.ShoppingCart';import{localeCurrency}from'../services/helpers';var ShoppingCart=/*#__PURE__*/function(_React$Component){_inherits(ShoppingCart,_React$Component);var _super=_createSuper(ShoppingCart);function ShoppingCart(props){var _this;_classCallCheck(this,ShoppingCart);_this=_super.call(this,props);_this.state={totalPrice:0};_this.totalPrice=_this.totalPrice.bind(_assertThisInitialized(_this));_this.increaseProductQuantity=_this.increaseProductQuantity.bind(_assertThisInitialized(_this));_this.decreaseProductQuantity=_this.decreaseProductQuantity.bind(_assertThisInitialized(_this));_this.deleteProduct=_this.deleteProduct.bind(_assertThisInitialized(_this));_this.renderEmptyCart=_this.renderEmptyCart.bind(_assertThisInitialized(_this));_this.renderTotalPrice=_this.renderTotalPrice.bind(_assertThisInitialized(_this));_this.renderCheckoutButton=_this.renderCheckoutButton.bind(_assertThisInitialized(_this));return _this;}_createClass(ShoppingCart,[{key:\"componentDidMount\",value:function componentDidMount(){this.totalPrice();}},{key:\"totalPrice\",value:function totalPrice(){var listOfProducts=JSON.parse(localStorage.getItem('shoppingCart'));var total=listOfProducts.reduce(function(acc,product){return acc+product.price*product.quantity;},0);this.setState({totalPrice:total});}},{key:\"increaseProductQuantity\",value:function increaseProductQuantity(id){var listOfProducts=JSON.parse(localStorage.getItem('shoppingCart'));var newCart=listOfProducts.map(function(item){var availableQuantity=item.available_quantity;if(item.id===id&&availableQuantity>item.quantity){item.quantity+=1;return item;}return item;});localStorage.setItem('shoppingCart',JSON.stringify(newCart));this.totalPrice();}},{key:\"decreaseProductQuantity\",value:function decreaseProductQuantity(id){var listOfProducts=JSON.parse(localStorage.getItem('shoppingCart'));var item=listOfProducts.find(function(product){return product.id===id;});if(item.quantity!==0){item.quantity-=1;}localStorage.setItem('shoppingCart',JSON.stringify(listOfProducts));this.totalPrice();}},{key:\"deleteProduct\",value:function deleteProduct(id){var listOfProducts=JSON.parse(localStorage.getItem('shoppingCart'));var itemToRemove=listOfProducts.find(function(product){return product.id===id;});var index=listOfProducts.indexOf(itemToRemove);listOfProducts.splice(index,1);localStorage.setItem('shoppingCart',JSON.stringify(listOfProducts));this.totalPrice();}},{key:\"renderEmptyCart\",value:function renderEmptyCart(){return/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"p\",null,\"Seu carrinho est\\xE1 vazio\"));}},{key:\"renderTotalPrice\",value:function renderTotalPrice(){var totalPrice=this.state.totalPrice;return/*#__PURE__*/React.createElement(\"p\",null,\"O valor total da compra: \",localeCurrency(totalPrice),\".\");}},{key:\"renderCheckoutButton\",value:function renderCheckoutButton(){return/*#__PURE__*/React.createElement(Link,{to:\"/order-summary\"},/*#__PURE__*/React.createElement(S.ButtonReview,{type:\"button\"},\"Revisar Compra\"));}},{key:\"render\",value:function render(){var _this2=this;var listOfProducts=JSON.parse(localStorage.getItem('shoppingCart'));var emptyCart=this.renderEmptyCart();if(listOfProducts.length===0)return emptyCart;return/*#__PURE__*/React.createElement(S.Main,null,/*#__PURE__*/React.createElement(S.Header,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Carrinho de Compras\")),/*#__PURE__*/React.createElement(S.SectionCards,null,listOfProducts.map(function(_ref){var title=_ref.title,thumbnail=_ref.thumbnail,quantity=_ref.quantity,id=_ref.id,price=_ref.price;return/*#__PURE__*/React.createElement(S.DivCard,{key:id},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return _this2.deleteProduct(id);}},\"X\"),/*#__PURE__*/React.createElement(\"img\",{style:{height:\"100px\",\"max-height\":\"100px\",\"width\":\"auto\",\"max-width\":\"100px\",\"border-radius\":\"10%\"},src:thumbnail,alt:\"foto \".concat(title)}),/*#__PURE__*/React.createElement(S.Ptitle,null,title),/*#__PURE__*/React.createElement(S.DivUpDown,null,/*#__PURE__*/React.createElement(S.ButtonUpDown,{type:\"button\",onClick:function onClick(){return _this2.decreaseProductQuantity(id);}},\"-\"),/*#__PURE__*/React.createElement(\"p\",null,quantity),/*#__PURE__*/React.createElement(S.ButtonUpDown,{type:\"button\",onClick:function onClick(){return _this2.increaseProductQuantity(id);}},\"+\")),/*#__PURE__*/React.createElement(\"p\",null,localeCurrency(price)));})),/*#__PURE__*/React.createElement(S.Footer,null,this.renderTotalPrice(),this.renderCheckoutButton()));}}]);return ShoppingCart;}(React.Component);export default ShoppingCart;","map":{"version":3,"sources":["/home/jhon/Projetos/react-online-store/src/Pages/ShoppingCart.jsx"],"names":["React","Link","S","localeCurrency","ShoppingCart","props","state","totalPrice","bind","increaseProductQuantity","decreaseProductQuantity","deleteProduct","renderEmptyCart","renderTotalPrice","renderCheckoutButton","listOfProducts","JSON","parse","localStorage","getItem","total","reduce","acc","product","price","quantity","setState","id","newCart","map","item","availableQuantity","available_quantity","setItem","stringify","find","itemToRemove","index","indexOf","splice","emptyCart","length","title","thumbnail","height","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport * as S from '../CSS/S.ShoppingCart';\nimport { localeCurrency } from '../services/helpers';\n\nclass ShoppingCart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      totalPrice: 0,\n    };\n    this.totalPrice = this.totalPrice.bind(this);\n    this.increaseProductQuantity = this.increaseProductQuantity.bind(this);\n    this.decreaseProductQuantity = this.decreaseProductQuantity.bind(this);\n    this.deleteProduct = this.deleteProduct.bind(this);\n    this.renderEmptyCart = this.renderEmptyCart.bind(this);\n    this.renderTotalPrice = this.renderTotalPrice.bind(this);\n    this.renderCheckoutButton = this.renderCheckoutButton.bind(this);\n  }\n\n  componentDidMount() {\n    this.totalPrice();\n  }\n\n  totalPrice() {\n    const listOfProducts = JSON.parse(localStorage.getItem('shoppingCart'));\n    const total = listOfProducts\n      .reduce((acc, product) => acc + (product.price * product.quantity), 0);\n    this.setState({\n      totalPrice: total,\n    });\n  }\n\n  increaseProductQuantity(id) {\n    const listOfProducts = JSON.parse(localStorage.getItem('shoppingCart'));\n    const newCart = listOfProducts.map((item) => {\n      const { available_quantity: availableQuantity } = item;\n      if (item.id === id && availableQuantity > item.quantity) {\n        item.quantity += 1;\n        return item;\n      }\n      return item;\n    });\n    localStorage.setItem('shoppingCart', JSON.stringify(newCart));\n    this.totalPrice();\n  }\n\n  decreaseProductQuantity(id) {\n    const listOfProducts = JSON.parse(localStorage.getItem('shoppingCart'));\n    const item = listOfProducts.find((product) => product.id === id);\n    if (item.quantity !== 0) {\n      item.quantity -= 1;\n    }\n    localStorage.setItem('shoppingCart', JSON.stringify(listOfProducts));\n    this.totalPrice();\n  }\n\n  deleteProduct(id) {\n    const listOfProducts = JSON.parse(localStorage.getItem('shoppingCart'));\n    const itemToRemove = listOfProducts.find((product) => product.id === id);\n    const index = listOfProducts.indexOf(itemToRemove);\n    listOfProducts.splice(index, 1);\n    localStorage.setItem('shoppingCart', JSON.stringify(listOfProducts));\n    this.totalPrice();\n  }\n\n  renderEmptyCart() {\n    return (\n      <section>\n        <p>\n          Seu carrinho est√° vazio\n        </p>\n      </section>\n    );\n  }\n\n  renderTotalPrice() {\n    const { totalPrice } = this.state;\n    return (\n      <p>\n        O valor total da compra: { localeCurrency(totalPrice) }.\n      </p>\n    );\n  }\n\n  renderCheckoutButton() {\n    return (\n      <Link to=\"/order-summary\">\n        <S.ButtonReview\n          type=\"button\"\n        >\n          Revisar Compra\n        </S.ButtonReview>\n      </Link>\n    );\n  }\n\n  render() {\n    const listOfProducts = JSON.parse(localStorage.getItem('shoppingCart'));\n    const emptyCart = this.renderEmptyCart();\n    if (listOfProducts.length === 0) return emptyCart;\n    return (\n      <S.Main>\n        <S.Header>\n          <h1>Carrinho de Compras</h1>\n        </S.Header>\n        <S.SectionCards>\n          {\n            listOfProducts.map(({ title, thumbnail, quantity, id, price }) => (\n              <S.DivCard key={ id }>\n                <button\n                  type=\"button\"\n                  onClick={ () => this.deleteProduct(id) }\n                >\n                  X\n                </button>\n                <img\n                  style={ { \n                    height: \"100px\", \"max-height\": \"100px\",\n                    \"width\": \"auto\", \"max-width\": \"100px\",\n                    \"border-radius\": \"10%\",\n                  } }\n                  src={ thumbnail }\n                  alt={ `foto ${title}` }\n                />\n                <S.Ptitle>{ title }</S.Ptitle>\n                <S.DivUpDown>\n                  <S.ButtonUpDown\n                    type=\"button\"\n                    onClick={ () => this.decreaseProductQuantity(id) }\n                  >\n                    -\n                  </S.ButtonUpDown>\n                  <p>{ quantity }</p>\n                  <S.ButtonUpDown\n                    type=\"button\"\n                    onClick={ () => this.increaseProductQuantity(id) }\n                  >\n                    +\n                  </S.ButtonUpDown>\n                </S.DivUpDown>\n                <p>{ localeCurrency(price) }</p>\n              </S.DivCard>\n            ))\n          }\n        </S.SectionCards>\n        <S.Footer>\n          { this.renderTotalPrice() }\n          { this.renderCheckoutButton() }\n        </S.Footer>\n      </S.Main>\n    );\n  }\n}\n\nShoppingCart.propTypes = {\n  location: PropTypes.shape({\n    state: PropTypes.arrayOf(),\n  }).isRequired,\n};\n\nexport default ShoppingCart;\n"]},"metadata":{},"sourceType":"module"}