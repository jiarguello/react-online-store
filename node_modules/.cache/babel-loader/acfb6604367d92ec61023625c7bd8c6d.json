{"ast":null,"code":"import _toConsumableArray from\"/home/jhon/Projetos/React-Online-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/jhon/Projetos/React-Online-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jhon/Projetos/React-Online-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/jhon/Projetos/React-Online-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/jhon/Projetos/React-Online-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jhon/Projetos/React-Online-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Link}from'react-router-dom';var ShoppingCart=/*#__PURE__*/function(_React$Component){_inherits(ShoppingCart,_React$Component);var _super=_createSuper(ShoppingCart);function ShoppingCart(props){var _this;_classCallCheck(this,ShoppingCart);_this=_super.call(this,props);var location=_this.props.location;var state=location.state;_this.state={listOfProducts:_toConsumableArray(state),totalPrice:0};_this.totalPrice=_this.totalPrice.bind(_assertThisInitialized(_this));_this.increaseProductQuantity=_this.increaseProductQuantity.bind(_assertThisInitialized(_this));_this.decreaseProductQuantity=_this.decreaseProductQuantity.bind(_assertThisInitialized(_this));_this.deleteProduct=_this.deleteProduct.bind(_assertThisInitialized(_this));_this.renderEmptyCart=_this.renderEmptyCart.bind(_assertThisInitialized(_this));_this.renderTotalPrice=_this.renderTotalPrice.bind(_assertThisInitialized(_this));_this.renderCheckoutButton=_this.renderCheckoutButton.bind(_assertThisInitialized(_this));return _this;}_createClass(ShoppingCart,[{key:\"componentDidMount\",value:function componentDidMount(){this.totalPrice();}},{key:\"totalPrice\",value:function totalPrice(){var listOfProducts=this.state.listOfProducts;var total=listOfProducts.reduce(function(acc,product){return acc+product.price*product.quantity;},0);this.setState({totalPrice:total});}},{key:\"increaseProductQuantity\",value:function increaseProductQuantity(id){var listOfProducts=this.state.listOfProducts;var newCart=listOfProducts.map(function(item){var availableQuantity=item.available_quantity;if(item.id===id&&availableQuantity>item.quantity){item.quantity+=1;return item;}return item;});this.setState({listOfProducts:newCart});this.totalPrice();}},{key:\"decreaseProductQuantity\",value:function decreaseProductQuantity(id){var listOfProducts=this.state.listOfProducts;var item=listOfProducts.find(function(product){return product.id===id;});if(item.quantity!==0){item.quantity-=1;}this.setState({listOfProducts:listOfProducts});this.totalPrice();}},{key:\"deleteProduct\",value:function deleteProduct(id){var listOfProducts=this.state.listOfProducts;var removeItem=listOfProducts.find(function(product){return product.id===id;});var index=listOfProducts.indexOf(removeItem);listOfProducts.splice(index,1);this.setState({listOfProducts:listOfProducts});this.totalPrice();}},{key:\"renderEmptyCart\",value:function renderEmptyCart(){return/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"p\",{\"data-testid\":\"shopping-cart-empty-message\"},\"Seu carrinho est\\xE1 vazio\"));}},{key:\"renderTotalPrice\",value:function renderTotalPrice(){var totalPrice=this.state.totalPrice;return/*#__PURE__*/React.createElement(\"p\",null,\"O valor total da compra: R$\",totalPrice);}},{key:\"renderCheckoutButton\",value:function renderCheckoutButton(){var listOfProducts=this.state.listOfProducts;return/*#__PURE__*/React.createElement(\"button\",{type:\"button\"},/*#__PURE__*/React.createElement(Link,{to:{pathname:'/order-summary',state:listOfProducts},\"data-testid\":\"checkout-products\"},\"Revisar Compra\"));}},{key:\"render\",value:function render(){var _this2=this;var listOfProducts=this.state.listOfProducts;var emptyCart=this.renderEmptyCart();if(listOfProducts.length===0)return emptyCart;return/*#__PURE__*/React.createElement(\"div\",null,listOfProducts.map(function(_ref){var title=_ref.title,thumbnail=_ref.thumbnail,quantity=_ref.quantity,id=_ref.id,price=_ref.price;return/*#__PURE__*/React.createElement(\"div\",{key:id},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return _this2.deleteProduct(id);}},\"X\"),/*#__PURE__*/React.createElement(\"img\",{src:thumbnail,alt:\"foto \".concat(title)}),/*#__PURE__*/React.createElement(\"p\",{\"data-testid\":\"shopping-cart-product-name\"},title),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",\"data-testid\":\"product-decrease-quantity\",onClick:function onClick(){return _this2.decreaseProductQuantity(id);}},\"-\"),/*#__PURE__*/React.createElement(\"p\",{\"data-testid\":\"shopping-cart-product-quantity\"},quantity),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",\"data-testid\":\"product-increase-quantity\",onClick:function onClick(){return _this2.increaseProductQuantity(id);}},\"+\"),/*#__PURE__*/React.createElement(\"span\",null,\"R$\",price)));}),this.renderTotalPrice(),this.renderCheckoutButton());}}]);return ShoppingCart;}(React.Component);export default ShoppingCart;","map":{"version":3,"sources":["/home/jhon/Projetos/React-Online-Store/src/Pages/ShoppingCart.jsx"],"names":["React","Link","ShoppingCart","props","location","state","listOfProducts","totalPrice","bind","increaseProductQuantity","decreaseProductQuantity","deleteProduct","renderEmptyCart","renderTotalPrice","renderCheckoutButton","total","reduce","acc","product","price","quantity","setState","id","newCart","map","item","availableQuantity","available_quantity","find","removeItem","index","indexOf","splice","pathname","emptyCart","length","title","thumbnail","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\n\nclass ShoppingCart extends React.Component {\n  constructor(props) {\n    super(props);\n    const { location } = this.props;\n    const { state } = location;\n    this.state = {\n      listOfProducts: [...state],\n      totalPrice: 0,\n    };\n    this.totalPrice = this.totalPrice.bind(this);\n    this.increaseProductQuantity = this.increaseProductQuantity.bind(this);\n    this.decreaseProductQuantity = this.decreaseProductQuantity.bind(this);\n    this.deleteProduct = this.deleteProduct.bind(this);\n    this.renderEmptyCart = this.renderEmptyCart.bind(this);\n    this.renderTotalPrice = this.renderTotalPrice.bind(this);\n    this.renderCheckoutButton = this.renderCheckoutButton.bind(this);\n  }\n\n  componentDidMount() {\n    this.totalPrice();\n  }\n\n  totalPrice() {\n    const { listOfProducts } = this.state;\n    const total = listOfProducts\n      .reduce((acc, product) => acc + (product.price * product.quantity), 0);\n    this.setState({\n      totalPrice: total,\n    });\n  }\n\n  increaseProductQuantity(id) {\n    const { listOfProducts } = this.state;\n    const newCart = listOfProducts.map((item) => {\n      const { available_quantity: availableQuantity } = item;\n      if (item.id === id && availableQuantity > item.quantity) {\n        item.quantity += 1;\n        return item;\n      }\n      return item;\n    });\n    this.setState({\n      listOfProducts: newCart,\n    });\n    this.totalPrice();\n  }\n\n  decreaseProductQuantity(id) {\n    const { listOfProducts } = this.state;\n    const item = listOfProducts.find((product) => product.id === id);\n    if (item.quantity !== 0) {\n      item.quantity -= 1;\n    }\n    this.setState({\n      listOfProducts,\n    });\n    this.totalPrice();\n  }\n\n  deleteProduct(id) {\n    const { listOfProducts } = this.state;\n    const removeItem = listOfProducts.find((product) => product.id === id);\n    const index = listOfProducts.indexOf(removeItem);\n    listOfProducts.splice(index, 1);\n    this.setState({\n      listOfProducts,\n    });\n    this.totalPrice();\n  }\n\n  renderEmptyCart() {\n    return (\n      <section>\n        <p data-testid=\"shopping-cart-empty-message\">\n          Seu carrinho está vazio\n        </p>\n      </section>\n    );\n  }\n\n  renderTotalPrice() {\n    const { totalPrice } = this.state;\n    return (\n      <p>\n        O valor total da compra: R$\n        { totalPrice }\n      </p>\n    );\n  }\n\n  renderCheckoutButton() {\n    const { listOfProducts } = this.state;\n    return (\n      <button\n        type=\"button\"\n      >\n        <Link\n          to={ {\n            pathname: '/order-summary',\n            state: listOfProducts,\n          } }\n          data-testid=\"checkout-products\"\n        >\n          Revisar Compra\n        </Link>\n      </button>\n    );\n  }\n\n  render() {\n    const { listOfProducts } = this.state;\n    const emptyCart = this.renderEmptyCart();\n    if (listOfProducts.length === 0) return emptyCart;\n    return (\n      <div>\n        {\n          listOfProducts.map(({ title, thumbnail, quantity, id, price }) => (\n            <div key={ id }>\n              <button\n                type=\"button\"\n                onClick={ () => this.deleteProduct(id) }\n              >\n                X\n              </button>\n              <img\n                src={ thumbnail }\n                alt={ `foto ${title}` }\n              />\n              <p data-testid=\"shopping-cart-product-name\">{ title }</p>\n              <div>\n                <button\n                  type=\"button\"\n                  data-testid=\"product-decrease-quantity\"\n                  onClick={ () => this.decreaseProductQuantity(id) }\n                >\n                  -\n                </button>\n                <p data-testid=\"shopping-cart-product-quantity\">{ quantity }</p>\n                <button\n                  type=\"button\"\n                  data-testid=\"product-increase-quantity\"\n                  onClick={ () => this.increaseProductQuantity(id) }\n                >\n                  +\n                </button>\n                <span>\n                  R$\n                  { price }\n                </span>\n              </div>\n            </div>\n          ))\n        }\n        { this.renderTotalPrice() }\n        { this.renderCheckoutButton() }\n      </div>\n    );\n  }\n}\n\nShoppingCart.propTypes = {\n  location: PropTypes.shape({\n    state: PropTypes.arrayOf(),\n  }).isRequired,\n};\n\nexport default ShoppingCart;\n"]},"metadata":{},"sourceType":"module"}