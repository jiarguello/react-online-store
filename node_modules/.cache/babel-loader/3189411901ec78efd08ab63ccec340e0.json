{"ast":null,"code":"import _regeneratorRuntime from\"/home/jhon/Projetos/React-Online-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jhon/Projetos/React-Online-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/home/jhon/Projetos/React-Online-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/jhon/Projetos/React-Online-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jhon/Projetos/React-Online-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/jhon/Projetos/React-Online-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/jhon/Projetos/React-Online-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jhon/Projetos/React-Online-Store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Link}from'react-router-dom';import*as api from'../services/api';import RatingForm from'../Components/RatingForm';var ProductDetails=/*#__PURE__*/function(_React$Component){_inherits(ProductDetails,_React$Component);var _super=_createSuper(ProductDetails);function ProductDetails(){var _this;_classCallCheck(this,ProductDetails);_this=_super.call(this);_this.state={product:[],shoppingCart:[]};_this.fetchCategory=_this.fetchCategory.bind(_assertThisInitialized(_this));_this.addToCart=_this.addToCart.bind(_assertThisInitialized(_this));_this.setShoppingCart=_this.setShoppingCart.bind(_assertThisInitialized(_this));return _this;}_createClass(ProductDetails,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchCategory();this.setShoppingCart();}},{key:\"setShoppingCart\",value:function setShoppingCart(){var location=this.props.location;var state=location.state;if(state){this.setState({shoppingCart:_toConsumableArray(state)});}}},{key:\"addToCart\",value:function addToCart(){var _this$state=this.state,product=_this$state.product,shoppingCart=_this$state.shoppingCart;product.quantity=1;this.setState({shoppingCart:[].concat(_toConsumableArray(shoppingCart),[product])});}},{key:\"fetchCategory\",value:function(){var _fetchCategory=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$props$match$par,categoryID,id,productObj,productDetails;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props$match$par=this.props.match.params,categoryID=_this$props$match$par.categoryID,id=_this$props$match$par.id;_context.next=3;return api.getProductsFromCategoryAndQuery(categoryID,'');case 3:productObj=_context.sent;productDetails=productObj.results.find(function(product){return product.id===id;});this.setState({product:productDetails});case 6:case\"end\":return _context.stop();}}},_callee,this);}));function fetchCategory(){return _fetchCategory.apply(this,arguments);}return fetchCategory;}()},{key:\"render\",value:function render(){var _this$state2=this.state,product=_this$state2.product,shoppingCart=_this$state2.shoppingCart;var title=product.title,thumbnail=product.thumbnail,price=product.price;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"span\",{\"data-testid\":\"product-detail-name\"},title,' ',\"-\",' '),/*#__PURE__*/React.createElement(\"span\",null,\"R$\",' ',price)),/*#__PURE__*/React.createElement(\"img\",{src:thumbnail,alt:\"product-thumbnail\"}),/*#__PURE__*/React.createElement(RatingForm,null),/*#__PURE__*/React.createElement(Link,{\"data-testid\":\"shopping-cart-button\",to:{pathname:'/shopping-cart',state:shoppingCart}},\"Ir para carrinho\"),/*#__PURE__*/React.createElement(\"span\",{\"data-testid\":\"shopping-cart-size\"},shoppingCart.length),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",\"data-testid\":\"product-detail-add-to-cart\",onClick:this.addToCart},\"Adicionar ao Carrinho\"));}}]);return ProductDetails;}(React.Component);export default ProductDetails;","map":{"version":3,"sources":["/home/jhon/Projetos/React-Online-Store/src/Pages/ProductDetails.jsx"],"names":["React","Link","api","RatingForm","ProductDetails","state","product","shoppingCart","fetchCategory","bind","addToCart","setShoppingCart","location","props","setState","quantity","match","params","categoryID","id","getProductsFromCategoryAndQuery","productObj","productDetails","results","find","title","thumbnail","price","pathname","length","Component"],"mappings":"6uCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,iBAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,C,GAEMC,CAAAA,c,4HACJ,yBAAc,gDACZ,wBACA,MAAKC,KAAL,CAAa,CACXC,OAAO,CAAE,EADE,CAEXC,YAAY,CAAE,EAFH,CAAb,CAIA,MAAKC,aAAL,CAAqB,MAAKA,aAAL,CAAmBC,IAAnB,+BAArB,CACA,MAAKC,SAAL,CAAiB,MAAKA,SAAL,CAAeD,IAAf,+BAAjB,CACA,MAAKE,eAAL,CAAuB,MAAKA,eAAL,CAAqBF,IAArB,+BAAvB,CARY,aASb,C,wFAEmB,CAClB,KAAKD,aAAL,GACA,KAAKG,eAAL,GACD,C,yDAEiB,IACRC,CAAAA,QADQ,CACK,KAAKC,KADV,CACRD,QADQ,IAERP,CAAAA,KAFQ,CAEEO,QAFF,CAERP,KAFQ,CAGhB,GAAIA,KAAJ,CAAW,CACT,KAAKS,QAAL,CAAc,CAAEP,YAAY,oBAAMF,KAAN,CAAd,CAAd,EACD,CACF,C,6CAEW,iBACwB,KAAKA,KAD7B,CACFC,OADE,aACFA,OADE,CACOC,YADP,aACOA,YADP,CAEVD,OAAO,CAACS,QAAR,CAAmB,CAAnB,CACA,KAAKD,QAAL,CAAc,CAAEP,YAAY,8BAAMA,YAAN,GAAoBD,OAApB,EAAd,CAAd,EACD,C,8UAGmD,KAAKO,K,CAA/CG,K,CAASC,M,CAAUC,U,uBAAAA,U,CAAYC,E,uBAAAA,E,uBACdjB,CAAAA,GAAG,CAACkB,+BAAJ,CAAoCF,UAApC,CAAgD,EAAhD,C,QAAnBG,U,eACAC,c,CAAiBD,UAAU,CAACE,OAAX,CACpBC,IADoB,CACf,SAAClB,OAAD,QAAaA,CAAAA,OAAO,CAACa,EAAR,GAAeA,EAA5B,EADe,C,CAEvB,KAAKL,QAAL,CAAc,CACZR,OAAO,CAAEgB,cADG,CAAd,E,mMAKO,kBAC2B,KAAKjB,KADhC,CACCC,OADD,cACCA,OADD,CACUC,YADV,cACUA,YADV,IAECkB,CAAAA,KAFD,CAE6BnB,OAF7B,CAECmB,KAFD,CAEQC,SAFR,CAE6BpB,OAF7B,CAEQoB,SAFR,CAEmBC,KAFnB,CAE6BrB,OAF7B,CAEmBqB,KAFnB,CAGP,mBACE,4CACE,0CACE,4BAAM,cAAY,qBAAlB,EACIF,KADJ,CAEG,GAFH,KAIG,GAJH,CADF,cAOE,qCAEG,GAFH,CAGIE,KAHJ,CAPF,CADF,cAcE,2BAAK,GAAG,CAAGD,SAAX,CAAuB,GAAG,CAAC,mBAA3B,EAdF,cAeE,oBAAC,UAAD,MAfF,cAgBE,oBAAC,IAAD,EACE,cAAY,sBADd,CAEE,EAAE,CAAG,CACHE,QAAQ,CAAE,gBADP,CAEHvB,KAAK,CAAEE,YAFJ,CAFP,qBAhBF,cAyBE,4BAAM,cAAY,oBAAlB,EAAyCA,YAAY,CAACsB,MAAtD,CAzBF,cA0BE,8BACE,IAAI,CAAC,QADP,CAEE,cAAY,4BAFd,CAGE,OAAO,CAAG,KAAKnB,SAHjB,0BA1BF,CADF,CAoCD,C,4BAhF0BV,KAAK,CAAC8B,S,EA+FnC,cAAe1B,CAAAA,cAAf","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport * as api from '../services/api';\nimport RatingForm from '../Components/RatingForm';\n\nclass ProductDetails extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      product: [],\n      shoppingCart: [],\n    };\n    this.fetchCategory = this.fetchCategory.bind(this);\n    this.addToCart = this.addToCart.bind(this);\n    this.setShoppingCart = this.setShoppingCart.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchCategory();\n    this.setShoppingCart();\n  }\n\n  setShoppingCart() {\n    const { location } = this.props;\n    const { state } = location;\n    if (state) {\n      this.setState({ shoppingCart: [...state] });\n    }\n  }\n\n  addToCart() {\n    const { product, shoppingCart } = this.state;\n    product.quantity = 1;\n    this.setState({ shoppingCart: [...shoppingCart, product] });\n  }\n\n  async fetchCategory() {\n    const { match: { params: { categoryID, id } } } = this.props;\n    const productObj = await api.getProductsFromCategoryAndQuery(categoryID, '');\n    const productDetails = productObj.results\n      .find((product) => product.id === id);\n    this.setState({\n      product: productDetails,\n    });\n  }\n\n  render() {\n    const { product, shoppingCart } = this.state;\n    const { title, thumbnail, price } = product;\n    return (\n      <div>\n        <p>\n          <span data-testid=\"product-detail-name\">\n            { title }\n            {' '}\n            -\n            {' '}\n          </span>\n          <span>\n            R$\n            {' '}\n            { price }\n          </span>\n        </p>\n        <img src={ thumbnail } alt=\"product-thumbnail\" />\n        <RatingForm />\n        <Link\n          data-testid=\"shopping-cart-button\"\n          to={ {\n            pathname: '/shopping-cart',\n            state: shoppingCart,\n          } }\n        >\n          Ir para carrinho\n        </Link>\n        <span data-testid=\"shopping-cart-size\">{ shoppingCart.length }</span>\n        <button\n          type=\"button\"\n          data-testid=\"product-detail-add-to-cart\"\n          onClick={ this.addToCart }\n        >\n          Adicionar ao Carrinho\n        </button>\n      </div>\n    );\n  }\n}\n\nProductDetails.propTypes = {\n  location: PropTypes.shape({\n    state: PropTypes.arrayOf(),\n  }).isRequired,\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      categoryID: PropTypes.string,\n      id: PropTypes.string,\n    }).isRequired,\n  }).isRequired,\n};\n\nexport default ProductDetails;\n"]},"metadata":{},"sourceType":"module"}