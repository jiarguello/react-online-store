{"ast":null,"code":"import _toConsumableArray from\"/home/jhon/Projetos/react-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/jhon/Projetos/react-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jhon/Projetos/react-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/jhon/Projetos/react-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/jhon/Projetos/react-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jhon/Projetos/react-online-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Link}from'react-router-dom';import RatingForm from'../Components/RatingForm';import{localeCurrency}from'../services/helpers';import*as S from'../CSS/S.ProductDetails';import CartImg from'../Images/carrinho.png';var ProductDetails=/*#__PURE__*/function(_React$Component){_inherits(ProductDetails,_React$Component);var _super=_createSuper(ProductDetails);function ProductDetails(){var _this;_classCallCheck(this,ProductDetails);_this=_super.call(this);_this.state={toggle:false};_this.addToCart=_this.addToCart.bind(_assertThisInitialized(_this));_this.toggle=_this.toggle.bind(_assertThisInitialized(_this));return _this;}_createClass(ProductDetails,[{key:\"addToCart\",value:function addToCart(){var shoppingCart=JSON.parse(localStorage.getItem('shoppingCart'));var currentProduct=JSON.parse(localStorage.getItem('currentItem'));var isOnCart=shoppingCart.some(function(product){return product.id===currentProduct.id;});if(isOnCart){shoppingCart.find(function(product){if(product.id===currentProduct.id){var quantity=product.quantity,availableQuantity=product.available_quantity;if(quantity<availableQuantity){product.quantity=quantity+1;localStorage.setItem('shoppingCart',JSON.stringify(shoppingCart));}}});}else{currentProduct.quantity=1;var newCart=[].concat(_toConsumableArray(shoppingCart),[currentProduct]);localStorage.setItem('shoppingCart',JSON.stringify(newCart));}}},{key:\"toggle\",value:function toggle(){var toggle=this.state.toggle;this.addToCart();this.setState({toggle:!toggle});}},{key:\"render\",value:function render(){var product=JSON.parse(localStorage.getItem('currentItem'));// console.log(product);\nvar shoppingCart=JSON.parse(localStorage.getItem('shoppingCart'));var title=product.title,thumbnail=product.thumbnail,price=product.price,attributes=product.attributes;return/*#__PURE__*/React.createElement(S.Div,null,/*#__PURE__*/React.createElement(S.H3,null,title),/*#__PURE__*/React.createElement(S.Hr,null),/*#__PURE__*/React.createElement(S.Main,null,/*#__PURE__*/React.createElement(S.Section,null,/*#__PURE__*/React.createElement(\"img\",{style:{height:'200px'},src:thumbnail,alt:\"product-thumbnail\"}),/*#__PURE__*/React.createElement(S.DescriptionDiv,null,/*#__PURE__*/React.createElement(S.H4,null,\"Descri\\xE7\\xE3o do produto\"),/*#__PURE__*/React.createElement(S.Hrsub,null),/*#__PURE__*/React.createElement(S.P,null,\"Valor - \",localeCurrency(price)),attributes.map(function(_ref){var name=_ref.name,valueName=_ref.value_name;return/*#__PURE__*/React.createElement(S.P,null,\"\".concat(name,\" - \").concat(valueName));}))),/*#__PURE__*/React.createElement(S.Aside,null,/*#__PURE__*/React.createElement(Link,{style:{'text-decoration':'none'},to:\"/shopping-cart\"},/*#__PURE__*/React.createElement(S.Button,{type:\"button\"},\"Ir para carrinho\",/*#__PURE__*/React.createElement(S.DivButton,null,/*#__PURE__*/React.createElement(S.CartImg,{src:CartImg,alt:\"shopping-cart img\"}),/*#__PURE__*/React.createElement(S.Span,null,shoppingCart.length)))),/*#__PURE__*/React.createElement(S.Button,{type:\"button\",onClick:this.toggle},\"Adicionar ao Carrinho\"),/*#__PURE__*/React.createElement(RatingForm,null))));}}]);return ProductDetails;}(React.Component);export default ProductDetails;","map":{"version":3,"sources":["/home/jhon/Projetos/react-online-store/src/Pages/ProductDetails.jsx"],"names":["React","Link","RatingForm","localeCurrency","S","CartImg","ProductDetails","state","toggle","addToCart","bind","shoppingCart","JSON","parse","localStorage","getItem","currentProduct","isOnCart","some","product","id","find","quantity","availableQuantity","available_quantity","setItem","stringify","newCart","setState","title","thumbnail","price","attributes","height","map","name","valueName","value_name","length","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport RatingForm from '../Components/RatingForm';\nimport { localeCurrency } from '../services/helpers';\nimport * as S from '../CSS/S.ProductDetails';\nimport CartImg from '../Images/carrinho.png';\n\nclass ProductDetails extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      toggle: false,\n    }\n    this.addToCart = this.addToCart.bind(this);\n    this.toggle = this.toggle.bind(this);\n  }\n\n  addToCart() {\n    const shoppingCart = JSON.parse(localStorage.getItem('shoppingCart'));\n    const currentProduct = JSON.parse(localStorage.getItem('currentItem'));\n    const isOnCart = shoppingCart.some((product) => product.id === currentProduct.id);\n    if (isOnCart) {\n      shoppingCart.find((product) => {\n        if (product.id === currentProduct.id) {\n          const { quantity, available_quantity: availableQuantity } = product;\n          if (quantity < availableQuantity) {\n            product.quantity = quantity + 1;\n            localStorage.setItem('shoppingCart', JSON.stringify(shoppingCart));\n          }\n        }\n      });\n    } else {\n      currentProduct.quantity = 1;\n      const newCart = [...shoppingCart, currentProduct];\n      localStorage.setItem('shoppingCart', JSON.stringify(newCart));\n    }\n  }\n\n  toggle() {\n    const { toggle } = this.state;\n    this.addToCart();\n    this.setState({ toggle: !toggle });\n  }\n\n  render() {\n    const product = JSON.parse(localStorage.getItem('currentItem'));\n    // console.log(product);\n    const shoppingCart = JSON.parse(localStorage.getItem('shoppingCart'));\n    const { title, thumbnail, price, attributes } = product;\n    return (\n      <S.Div>\n        <S.H3>{ title }</S.H3>\n        <S.Hr />\n        <S.Main>\n          <S.Section>\n            <img style={ { height: '200px' }} src={ thumbnail } alt=\"product-thumbnail\" />\n            <S.DescriptionDiv>\n              <S.H4>Descrição do produto</S.H4>\n              <S.Hrsub />\n              <S.P>Valor - { localeCurrency(price) }</S.P>\n              {\n                attributes\n                  .map(({ name, value_name: valueName }) => (\n                    <S.P>{`${name} - ${valueName}`}</S.P>\n                  ))\n              }\n            </S.DescriptionDiv>\n          </S.Section>\n          <S.Aside>\n            <Link\n              style={ { 'text-decoration': 'none' } }\n              to=\"/shopping-cart\"\n            >\n              <S.Button type=\"button\">\n                Ir para carrinho\n                <S.DivButton>\n                  <S.CartImg\n                    src={ CartImg }\n                    alt=\"shopping-cart img\"\n                  />\n                  <S.Span>{ shoppingCart.length }</S.Span>\n                </S.DivButton>\n              </S.Button>\n            </Link>\n            <S.Button\n              type=\"button\"\n              onClick={ this.toggle }\n              >\n              Adicionar ao Carrinho\n            </S.Button>\n            <RatingForm />\n          </S.Aside>\n        </S.Main>\n      </S.Div>\n    );\n  }\n}\n\nProductDetails.propTypes = {\n  location: PropTypes.shape({\n    state: PropTypes.arrayOf(),\n  }).isRequired,\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      categoryID: PropTypes.string,\n      id: PropTypes.string,\n    }).isRequired,\n  }).isRequired,\n};\n\nexport default ProductDetails;\n"]},"metadata":{},"sourceType":"module"}